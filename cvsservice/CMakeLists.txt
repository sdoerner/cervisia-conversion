INCLUDE_DIRECTORIES( ${KDE3_INCLUDE_DIR} ${QT_INCLUDE_DIR} ${CMAKE_CURRENT_SOURCE_DIR} ${CMAKE_CURRENT_BINARY_DIR}  )


########### next target ###############

SET(cvsservice_KDEINIT_SRCS
main.cpp
cvsservice.cpp
cvsjob.cpp
repository.cpp
sshagent.cpp
cvsserviceutils.cpp
cvsloginjob.cpp
)

KDE3_AUTOMOC(${cvsservice_KDEINIT_SRCS})

SET( cvsservice_DCOP_SKEL_SRCS
cvsservice.h
cvsjob.h
repository.h
cvsloginjob.h
)

KDE3_ADD_DCOP_SKELS(cvsservice_KDEINIT_SRCS ${cvsservice_DCOP_SKEL_SRCS})

SET( cvsservice_DCOP_STUB_SRCS
cvsservice.h
cvsjob.h
repository.h
cvsloginjob.h
)

KDE3_ADD_DCOP_STUBS(cvsservice_KDEINIT_SRCS ${cvsservice_DCOP_STUB_SRCS})

KDE3_ADD_KLM( cvsservice ${cvsservice_KDEINIT_SRCS})

TARGET_LINK_LIBRARIES(kdeinit_cvsservice  ${QT_AND_KDECORE_LIBS} kio )

INSTALL_TARGETS(/lib kdeinit_cvsservice )

TARGET_LINK_LIBRARIES( cvsservice kdeinit_cvsservice )
INSTALL_TARGETS(/bin cvsservice )

########### next target ###############

SET(cvsaskpass_KDEINIT_SRCS
cvsaskpass.cpp
)

KDE3_AUTOMOC(${cvsaskpass_KDEINIT_SRCS})

KDE3_ADD_KLM( cvsaskpass ${cvsaskpass_KDEINIT_SRCS})

TARGET_LINK_LIBRARIES(kdeinit_cvsaskpass  ${QT_AND_KDECORE_LIBS} kdeui )

INSTALL_TARGETS(/lib kdeinit_cvsaskpass )

TARGET_LINK_LIBRARIES( cvsaskpass kdeinit_cvsaskpass )
INSTALL_TARGETS(/bin cvsaskpass )

########### next target ###############

SET(cvsservicestubs_LIB_SRCS
dummy.cpp
)

FILE(WRITE dummy.cpp "//autogenerated file by cmake\n")

KDE3_AUTOMOC(${cvsservicestubs_LIB_SRCS})

SET( cvsservicestubs_DCOP_STUB_SRCS
cvsservice.h
cvsjob.h
repository.h
)

KDE3_ADD_DCOP_STUBS(cvsservicestubs_LIB_SRCS ${cvsservicestubs_DCOP_STUB_SRCS})

ADD_LIBRARY(cvsservicestubs SHARED ${cvsservicestubs_LIB_SRCS})

TARGET_LINK_LIBRARIES(cvsservicestubs  ${QT_AND_KDECORE_LIBS} )

SET_TARGET_PROPERTIES(cvsservicestubs PROPERTIES VERSION 4.2.0 SOVERSION 4 )
INSTALL_TARGETS(/lib cvsservicestubs )


########### install files ###############

INSTALL_FILES( /share/services FILES cvsservice.desktop )
INSTALL_FILES( /include FILES cvsservice_stub.h cvsjob_stub.h repository_stub.h )

#KDE3_PLACEHOLDER()



#original Makefile.am contents follow:

##
##                        CvsService Makefile.am
##
##  Copyright (c) 2002-2003 Christian Loose <christian.loose@hamburg.de>
##
##
#
#INCLUDES = $(all_includes)
#
## cvs DCOP service
#bin_PROGRAMS =
#kdeinit_LTLIBRARIES = cvsservice.la cvsaskpass.la
#
#cvsservice_la_LDFLAGS = $(all_libraries) $(KDE_PLUGIN) -module
#cvsservice_la_LIBADD = $(LIB_KIO)
#cvsservice_la_SOURCES = main.cpp cvsservice.cpp cvsjob.cpp \
#	cvsservice.skel cvsservice.stub cvsjob.skel cvsjob.stub \
#	repository.cpp repository.skel repository.stub sshagent.cpp \
#	cvsserviceutils.cpp cvsloginjob.cpp cvsloginjob.skel cvsloginjob.stub
#
#cvsaskpass_la_LDFLAGS = $(all_libraries) $(KDE_PLUGIN) -module
#cvsaskpass_la_LIBADD = $(LIB_KDEUI)
#cvsaskpass_la_SOURCES = cvsaskpass.cpp
#
#include_HEADERS = cvsservice_stub.h cvsjob_stub.h repository_stub.h
#noinst_HEADERS = cvsservice.h cvsjob.h repository.h cvsserviceutils.h \
#	sshagent.h
#
## cvs DCOP service stub library
#lib_LTLIBRARIES = libcvsservicestubs.la
#
#libcvsservicestubs_la_LDFLAGS = $(all_libraries) -no-undefined -version-info 0:1
#libcvsservicestubs_la_LIBADD = $(LIB_KDECORE)
#libcvsservicestubs_la_SOURCES = cvsservice.stub cvsjob.stub repository.stub dummy.cpp
#
#dummy.cpp:
#	echo > dummy.cpp
#
## let automoc handle all of the meta source files (moc)
#METASOURCES = AUTO
#
## install .desktop file
#service_DATA = cvsservice.desktop
#servicedir = $(kde_servicesdir)
#
## i18n
#messages:
#	$(XGETTEXT) *.cpp *.h -o $(podir)/cvsservice.pot
#
## API documentation
## Not activated because KDE_INIT_DOXYGEN is missing in
## kdesdk's configure.in.in
##DOXYGEN_REFERENCES = dcop kdecore kdeui
##include ../../admin/Doxyfile.am
