INCLUDE_DIRECTORIES( ${KDE3_INCLUDE_DIR} ${QT_INCLUDE_DIR} ${CMAKE_CURRENT_SOURCE_DIR} ${CMAKE_CURRENT_BINARY_DIR}  )


########### next target ###############

SET(svnservice_KDEINIT_SRCS
main.cpp
svnservice.cpp
svnjob.cpp
svnrepository.cpp
)

KDE3_AUTOMOC(${svnservice_KDEINIT_SRCS})

SET( svnservice_DCOP_SKEL_SRCS
svnservice.h
svnjob.h
svnrepository.h
)

KDE3_ADD_DCOP_SKELS(svnservice_KDEINIT_SRCS ${svnservice_DCOP_SKEL_SRCS})

SET( svnservice_DCOP_STUB_SRCS
svnservice.h
svnjob.h
svnrepository.h
)

KDE3_ADD_DCOP_STUBS(svnservice_KDEINIT_SRCS ${svnservice_DCOP_STUB_SRCS})

KDE3_ADD_KLM( svnservice ${svnservice_KDEINIT_SRCS})

TARGET_LINK_LIBRARIES(kdeinit_svnservice  ${QT_AND_KDECORE_LIBS} kio )

INSTALL_TARGETS(/lib kdeinit_svnservice )

TARGET_LINK_LIBRARIES( svnservice kdeinit_svnservice )
INSTALL_TARGETS(/bin svnservice )

########### next target ###############

SET(svnservicestubs_LIB_SRCS
dummy.cpp
)

FILE(WRITE dummy.cpp "//autogenerated file by cmake\n")

KDE3_AUTOMOC(${svnservicestubs_LIB_SRCS})

SET( svnservicestubs_DCOP_STUB_SRCS
svnservice.h
svnjob.h
svnrepository.h
)

KDE3_ADD_DCOP_STUBS(svnservicestubs_LIB_SRCS ${svnservicestubs_DCOP_STUB_SRCS})

ADD_LIBRARY(svnservicestubs SHARED ${svnservicestubs_LIB_SRCS})

TARGET_LINK_LIBRARIES(svnservicestubs  ${QT_AND_KDECORE_LIBS} )

SET_TARGET_PROPERTIES(svnservicestubs PROPERTIES VERSION 4.2.0 SOVERSION 4 )
INSTALL_TARGETS(/lib svnservicestubs )


########### install files ###############

INSTALL_FILES( /share/services FILES svnservice.desktop )
INSTALL_FILES( /include FILES svnservice_stub.h svnjob_stub.h svnrepository_stub.h )

#KDE3_PLACEHOLDER()



#original Makefile.am contents follow:

##
##                        SvnService Makefile.am
##
##  Copyright (c) 2005 Christian Loose <christian.loose@kdemail.net>
##
##
#
#INCLUDES = $(all_includes)
#
## Subversion DCOP service
#bin_PROGRAMS =
#kdeinit_LTLIBRARIES = svnservice.la
#
#svnservice_la_LDFLAGS = $(all_libraries) $(KDE_PLUGIN) -module
#svnservice_la_LIBADD = $(LIB_KIO)
#svnservice_la_SOURCES = main.cpp svnservice.cpp svnjob.cpp \
#	svnservice.skel svnservice.stub svnjob.skel svnjob.stub \
#	svnrepository.cpp svnrepository.skel svnrepository.stub
#
#include_HEADERS = svnservice_stub.h svnjob_stub.h svnrepository_stub.h
#noinst_HEADERS = svnservice.h svnjob.h svnrepository.h
#
## Subversion DCOP service stub library
#lib_LTLIBRARIES = libsvnservicestubs.la
#
#libsvnservicestubs_la_LDFLAGS = $(all_libraries) -no-undefined -version-info 0:1
#libsvnservicestubs_la_LIBADD = $(LIB_KDECORE)
#libsvnservicestubs_la_SOURCES = svnservice.stub svnjob.stub svnrepository.stub dummy.cpp
#
#dummy.cpp:
#	echo > dummy.cpp
#
## let automoc handle all of the meta source files (moc)
#METASOURCES = AUTO
#
## install .desktop file
#service_DATA = svnservice.desktop
#servicedir = $(kde_servicesdir)
#
## i18n
#messages:
#	$(XGETTEXT) *.cpp *.h -o $(podir)/svnservice.pot
